#include "matrix.h"


//***************************************************************************//
float DM(MATRIX M)
{
	float D;

	D = M.a[0][0]*M.a[1][1]*M.a[2][2] - M.a[0][0]*M.a[1][2]*M.a[2][1] - 
		M.a[1][1]*M.a[0][2]*M.a[2][0] - M.a[2][2]*M.a[0][1]*M.a[1][0] + 
		M.a[0][1]*M.a[2][0]*M.a[1][2] + M.a[0][2]*M.a[1][0]*M.a[2][1];
	return(D);
}

//***************************************************************************//
MATRIX RM(MATRIX M)
{
	MATRIX R;
	float A[3][3];
	float D;
	int i,j;

	A[0][0] =  (M.a[1][1]*M.a[2][2] - M.a[1][2]*M.a[2][1]);
	A[0][1] = -(M.a[1][0]*M.a[2][2] - M.a[1][2]*M.a[2][0]);
	A[0][2] =  (M.a[1][0]*M.a[2][1] - M.a[1][1]*M.a[2][0]);
	A[1][0] = -(M.a[0][1]*M.a[2][2] - M.a[0][2]*M.a[2][1]);
	A[1][1] =  (M.a[0][0]*M.a[2][2] - M.a[0][2]*M.a[2][0]);
	A[1][2] = -(M.a[0][0]*M.a[2][1] - M.a[0][1]*M.a[2][0]);
	A[2][0] =  (M.a[0][1]*M.a[1][2] - M.a[0][2]*M.a[1][1]);
	A[2][1] = -(M.a[0][0]*M.a[1][2] - M.a[0][2]*M.a[1][0]);
	A[2][2] =  (M.a[0][0]*M.a[1][1] - M.a[0][1]*M.a[1][0]);

	D = DM(M);
	for(i=0;i<3; i++){
		for(j=0; j<3; j++){
			R.a[i][j] = A[j][i] / D;
		}
	}
	return(R);
}

//***************************************************************************//
MATRIX TM(MATRIX M)
{
	MATRIX T;
	int i,j;

	for(i=0; i<3; i++){
		for(j=0; j<3; j++){
			T.a[i][j] = M.a[j][i];
		}
	}
	return(T);
}


//***************************************************************************//
MATRIX MM(MATRIX M1, MATRIX M2)
{
	MATRIX M;

	M.a[0][0] = M1.a[0][0]*M2.a[0][0] + M1.a[0][1]*M2.a[1][0] + M1.a[0][2]*M2.a[2][0];
	M.a[1][0] = M1.a[1][0]*M2.a[0][0] + M1.a[1][1]*M2.a[1][0] + M1.a[1][2]*M2.a[2][0];
	M.a[2][0] = M1.a[2][0]*M2.a[0][0] + M1.a[2][1]*M2.a[1][0] + M1.a[2][2]*M2.a[2][0];

	M.a[0][1] = M1.a[0][0]*M2.a[0][1] + M1.a[0][1]*M2.a[1][1] + M1.a[0][2]*M2.a[2][1];
	M.a[1][1] = M1.a[1][0]*M2.a[0][1] + M1.a[1][1]*M2.a[1][1] + M1.a[1][2]*M2.a[2][1];
	M.a[2][1] = M1.a[2][0]*M2.a[0][1] + M1.a[2][1]*M2.a[1][1] + M1.a[2][2]*M2.a[2][1];

	M.a[0][2] = M1.a[0][0]*M2.a[0][2] + M1.a[0][1]*M2.a[1][2] + M1.a[0][2]*M2.a[2][2];
	M.a[1][2] = M1.a[1][0]*M2.a[0][2] + M1.a[1][1]*M2.a[1][2] + M1.a[1][2]*M2.a[2][2];
	M.a[2][2] = M1.a[2][0]*M2.a[0][2] + M1.a[2][1]*M2.a[1][2] + M1.a[2][2]*M2.a[2][2];
	return(M);
}


